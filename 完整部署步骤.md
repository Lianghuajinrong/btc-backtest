# 🚀 完整部署步骤（从第二步开始）

## ✅ 第一步：已完成
代码已上传到GitHub：https://github.com/Lianghuajinrong/btc-backtest

---

## 📦 第二步：部署后端到Railway

### 步骤：

1. **访问 Railway**
   - 打开：https://railway.app
   - 点击右上角 "Login"

2. **登录**
   - 选择 "Login with GitHub"
   - 授权 Railway 访问你的 GitHub 账号

3. **创建新项目**
   - 点击 "New Project"
   - 选择 "Deploy from GitHub repo"
   - 在仓库列表中找到 `Lianghuajinrong/btc-backtest`
   - 点击选择

4. **等待部署**
   - Railway 会自动检测到：
     - `requirements.txt`（Python依赖）
     - `backend.py`（主文件）
     - `Procfile`（启动命令）
   - 等待 2-3 分钟
   - 看到 "Deploy successful" 表示成功

5. **获取后端URL**
   - 点击项目卡片进入项目详情
   - 点击 "Settings" 标签
   - 找到 "Domains" 部分
   - 如果没有域名，点击 "Generate Domain"
   - **复制生成的完整URL**（例如：`https://btc-backtest-production.up.railway.app`）

6. **告诉我你的Railway URL**
   - 把URL发给我，我会更新前端代码

---

## 🎨 第三步：更新前端代码（我会帮你完成）

收到你的Railway URL后，我会：
1. 更新 `index.html` 中的API地址
2. 提交更改到GitHub

---

## 🌐 第四步：部署前端到Vercel

### 步骤：

1. **访问 Vercel**
   - 打开：https://vercel.com
   - 点击右上角 "Sign Up" 或 "Login"

2. **登录**
   - 选择 "Continue with GitHub"
   - 授权 Vercel 访问你的 GitHub 账号

3. **导入项目**
   - 点击 "Add New Project"
   - 在仓库列表中找到 `Lianghuajinrong/btc-backtest`
   - 点击 "Import"

4. **配置项目**
   - Framework Preset: 选择 **"Other"**
   - Root Directory: 留空
   - Build Command: 留空
   - Output Directory: 留空
   - Install Command: 留空

5. **环境变量（重要！）**
   - 点击 "Environment Variables"
   - 添加变量：
     - Name: `API_BASE_URL`
     - Value: 你的Railway后端URL（例如：`https://btc-backtest-production.up.railway.app`）
   - 点击 "Add"

6. **部署**
   - 点击 "Deploy"
   - 等待 1-2 分钟
   - 部署完成后会显示前端URL（例如：`https://btc-backtest.vercel.app`）

7. **完成！**
   - 访问前端URL，测试回测功能
   - 如果遇到问题，查看浏览器控制台（F12）的错误信息

---

## 🔧 常见问题

### Railway部署问题：

**Q: Railway找不到我的仓库？**
A: 确保已经授权Railway访问GitHub，并且仓库是公开的。

**Q: 部署失败？**
A: 查看Railway的"Deployments"标签中的日志，检查错误信息。

**Q: 如何查看后端日志？**
A: 在Railway项目页面点击"Deployments" → 选择最新的部署 → 查看日志。

### Vercel部署问题：

**Q: 前端无法连接到后端？**
A: 
1. 确保在Vercel中设置了环境变量 `API_BASE_URL`
2. 确保Railway后端URL正确
3. 检查浏览器控制台（F12）的错误信息

**Q: CORS错误？**
A: 后端已经配置了CORS，允许所有来源。如果仍有问题，检查后端日志。

**Q: 如何更新代码？**
A: 每次推送到GitHub，Railway和Vercel都会自动重新部署。

---

## 📝 下一步

**现在请执行第二步：部署后端到Railway**

完成后，把Railway的URL发给我，我会继续帮你完成后续步骤！
